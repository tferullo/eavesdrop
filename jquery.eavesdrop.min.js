!function(a,b,c){function f(b,c){this.element=b,this._name=d,this._defaults=a.fn.eavesdrop.defaults,this.options=a.extend({},this._defaults,c),this.init()}var d="eavesdrop",e=0;a.extend(f.prototype,{constructor:f,init:function(){var c=a.proxy(this.clickParams,this),d=a.proxy(this.scrollParams,this),e=a.proxy(this.structure,this);this.buildCache(),this.errors(),this.scrollClick=this.navAnchor.on("click",c),this.scrollStructure=a(b).on("load resize",e),this.scrollWindow=a(b).on("load resize scroll",d),this.onScroll()},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildCache:function(){var b="."+this.options.watchClass;this.$element=a(this.element),this.$body=a("body"),this.$selector=a(b),this.navAnchor=this.$element.find("a"),this.selector=b,this.activeClass=this.options.activeClass,this.offset=this.options.offset,this.targets=a([]),this.distances=a([]),this.selectors=a([]),this.anchors=a([])},unbindEvents:function(){this.$element.off("."+this._name)},errors:function(){var a=this.$selector.length,b=this.$element.find("a").length;b===a?this.universalAmount=b:console.error("target to selector mismatch")},structure:function(){var b=this;this.$selector.each(function(c){c++;var d=b.navAnchor.eq(c-1).attr("href").split("#")[1];a(this).attr("data-connect",d);var e=a(this).data("connect");offset=a(this).offset().top,b.targets.push(e),b.distances.push(offset),b.selectors.push(c)})},clickParams:function(b){var c=b.currentTarget.hash.split("#")[1],d=this.selector+'[data-connect="'+c+'"]',e=a(d).offset().top;this.$body.trigger(c[1]+"-inView"),this.$body.animate({scrollTop:e-this.offset})},scrollParams:function(){for(var c=a(b).scrollTop(),d={},e=0;e<this.universalAmount;e++){var f=c-this.distances[e]+this.offset;f<0?d[this.selectors[e]]=1/0:d[this.selectors[e]]=f;var g=Object.keys(d).map(function(a){return d[a]}),h=Math.min.apply(null,g),i=g.indexOf(h)}this.$element.attr("data-active")!=i&&(this.$element.attr("data-active",i),this.$body.trigger("active."+this._name))},onScroll:function(){var a=this;a.$body.on("active."+this._name,function(){var b=a.$element.attr("data-active")||0;a.$element.find("."+a.activeClass).removeClass(a.activeClass),a.$element.find('a[href*="'+a.targets[b]+'"]').parent().addClass(a.activeClass),1==a._defaults.trackUrl&&history.replaceState(void 0,void 0,"#"+a.targets[b])})}}),a.fn.eavesdrop=function(b){return e++,this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new f(this,b))}),e>1&&(a.fn.eavesdrop.defaults.trackUrl=!1),this},a.fn.eavesdrop.defaults={watchClass:"eavesdrop",activeClass:"active",trackUrl:!0,offset:0}}(jQuery,window,document);