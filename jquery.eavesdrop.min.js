;function(t,s,e){function i(s,e){this.element=s,this._name=a,this._defaults=t.fn.eavesdrop.defaults,this.options=t.extend({},this._defaults,e),this.init()}var a="eavesdrop",n=0;t.extend(i.prototype,{constructor:i,init:function(){var e=t.proxy(this.clickParams,this),i=t.proxy(this.scrollParams,this),a=t.proxy(this.structure,this);this.buildCache(),this.errors(),this.scrollClick=this.navAnchor.on("click",e),this.scrollStructure=t(s).on("load resize",a),this.scrollWindow=t(s).on("load resize scroll",i),this.onScroll()},destroy:function(){this.unbindEvents(),this.$element.removeData()},buildCache:function(){var s="."+this.options.watchClass;this.$element=t(this.element),this.$body=t("body"),this.$selector=t(s),this.navAnchor=this.$element.find("a"),this.selector=s,this.activeClass=this.options.activeClass,this.targets=t([]),this.distances=t([]),this.selectors=t([]),this.anchors=t([])},unbindEvents:function(){this.$element.off("."+this._name)},errors:function(){var t=this.$selector.length,s=this.$element.find("a").length;s===t?this.universalAmount=s:console.error("target to selector mismatch")},structure:function(){var s=this;this.$selector.each(function(e){e++;var i=s.navAnchor.eq(e-1).attr("href").split("#")[1];t(this).attr("data-connect",i);var a=t(this).data("connect");offset=t(this).offset().top,s.targets.push(a),s.distances.push(offset),s.selectors.push(e)})},clickParams:function(s){var e=s.currentTarget.hash.split("#")[1],i=this.selector+'[data-connect="'+e+'"]',a=t(i).offset().top;this.$body.trigger(e[1]+"-inView"),this.$body.animate({scrollTop:a})},scrollParams:function(){for(var e=t(s).scrollTop(),i={},a=0;a<this.universalAmount;a++){var n=e-this.distances[a];0>n?i[this.selectors[a]]=1/0:i[this.selectors[a]]=n;var r=Object.keys(i).map(function(t){return i[t]}),o=Math.min.apply(null,r),c=r.indexOf(o)}this.$element.attr("data-active")!=c&&(this.$element.attr("data-active",c),this.$body.trigger("active."+this._name))},onScroll:function(){var t=this;t.$body.on("active."+this._name,function(){var s=t.$element.attr("data-active")||0;t.$element.find("."+t.activeClass).removeClass(t.activeClass),t.$element.find('a[href*="'+t.targets[s]+'"]').parent().addClass(t.activeClass),1==t._defaults.trackUrl&&history.replaceState(void 0,void 0,"#"+t.targets[s])})}}),t.fn.eavesdrop=function(s){return n++,this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new i(this,s))}),n>1&&(t.fn.eavesdrop.defaults.trackUrl=!1),this},t.fn.eavesdrop.defaults={watchClass:"eavesdrop",activeClass:"active",trackUrl:!0}}(jQuery,window,document);